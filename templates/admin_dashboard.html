{% extends "base.html" %}
{% block content %}
<h3>Admin Dashboard</h3>
<p class="small text-muted">Overview of recent actions.</p>

<hr>
<h5>Recent audit logs</h5>
<table class="table table-sm">
  <thead><tr><th>Time</th><th>Action</th><th>Actor</th><th>Cert ID</th><th>IP</th></tr></thead>
  <tbody>
    {% for a in audits %}
      <tr>
        <td>{{ a['created_at'] }}</td>
        <td>{{ a['action'] }}</td>
        <td>{{ a['actor'] }}</td>
        <td>{{ a['certificate_id'] or '-' }}</td>
        <td>{{ a['ip'] }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<hr>
<div class="row">
  <div class="col-md-6">
    <h6>Recent uploads</h6>
    <ul class="list-group">
      {% for u in uploads %}
        <li class="list-group-item small">{{ u['uploaded_at'] }} — {{ u['student_name'] }} by {{ u['uploaded_by'] }} (code: {{ u['verification_code'] }})</li>
      {% endfor %}
    </ul>
  </div>
  <div class="col-md-6">
    <h6>Teachers</h6>
    <ul class="list-group">
      {% for t in teachers %}
        <li class="list-group-item small">{{ t['created_at'] }} — {{ t['name'] }} ({{ t['email'] }})</li>
      {% endfor %}
    </ul>

    <h6 class="mt-3">Students</h6>
    <ul class="list-group">
      {% for s in students %}
        <li class="list-group-item small">{{ s['created_at'] }} — {{ s['name'] }} ({{ s['email'] }})</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
